<div class="mt-3">
  <div class="card mb-3">
    <div [className]="' card-header bg-' + todo.color">
      <div
        [ngClass]="{
          'text-decoration': todo.active,
          'text-decoration-line-through': !todo.active
        }"
        class="float-start fw-bold"
      >
        {{ todo.title }}
      </div>
      <div class="float-end">
        <button
          type="button"
          class="btn-close"
          (click)="onClick(todo)"
          data-bs-toggle="tooltip"
          data-bs-placement="top"
          title="Delete todo"
        ></button>
      </div>
    </div>
    <a (click)="showModalDetails(todo)">
      <div class="card-body">
        <p
          [ngClass]="{
            'text-decoration': todo.active,
            'text-decoration-line-through': !todo.active
          }"
          class="card-text"
        >
          {{ todo.description }}
        </p>
      </div>
    </a>
    <div class="card-footer text-muted">
      <div class="row">
        <div class="col-lg-6 col-md-6 col-xl-6 col-sm-12">
          <input
            type="checkbox"
            class="form-check-input"
            id="activeq{{ i }}"
            (click)="onCheckboxClick(todo)"
            [checked]="!this.todo.active"
          />
          <label class="form-check-label mx-1" for="activeq{{ i }}"
            >Mark as done</label
          >
        </div>

        <div class="col-lg-6 col-md-6 col-xl-6 col-sm-12">
          <button
            type="button"
            class="btn btn-primary btn-sm rounded float-end"
            (click)="showModalDetails(todo)"
          >
            Edit Todo
          </button>
          <button
            class="fa fa-square btn rounded float-end"
            id="success{{ i }}"
            style="color: green"
            (click)="changeColor(todo, 'success')"
          ></button>
          <button
            class="fa fa-square btn rounded float-end"
            id="primary{{ i }}"
            style="color: blue"
            (click)="changeColor(todo, 'primary')"
          ></button>
          <button
            class="fa fa-square btn rounded float-end"
            id="warning{{ i }}"
            style="color: yellow"
            (click)="changeColor(todo, 'warning')"
          ></button>
          <button
            class="fa fa-square btn rounded float-end"
            id="info{{ i }}"
            style="color: turquoise"
            (click)="changeColor(todo, 'info')"
          ></button>
          <button
            class="fa fa-square btn rounded float-end"
            id="light{{ i }}"
            style="color: gainsboro"
            (click)="changeColor(todo, 'light')"
          ></button>
        </div>
      </div>
    </div>
  </div>

  <div
    class="modal fade"
    id="exampleModal{{ i }}"
    tabindex="-1"
    aria-labelledby="exampleModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div [className]="'modal-header bg-' + todo.color">
          <h3>
            <strong>{{ todo.title }}</strong>
          </h3>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body">
          <textarea
            type="textarea"
            class="form-control"
            id="todoDescription"
            [(ngModel)]="todo.description"
          ></textarea>

          <br />

          <div class="row">
            <div class="col-lg-6 col-md-6 col-xl-6 col-sm-12 col-xs-12">
              <div class="float-start">
                <strong>Due Date:</strong> {{ todo.date }}
              </div>
            </div>

            <div class="col-lg-6 col-md-6 col-xl-6 col-sm-12 col-xs-12">
              <div class="">
                <input
                  type="text"
                  #datepickerYMD="bsDatepicker"
                  placeholder="Set New Date"
                  class="form-control"
                  id="setDateModel{{ i }}"
                  bsDatepicker
                  [minDate]="minDate"
                  [bsConfig]="{
                    dateInputFormat: 'DD-MM-YYYY',
                    isAnimated: true,
                    containerClass: 'theme-dark-blue'
                  }"
                  [(ngModel)]="date"
                />
              </div>
            </div>
          </div>
        </div>

        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-secondary"
            data-bs-dismiss="modal"
          >
            Close
          </button>
          <button
            type="button"
            class="btn btn-primary"
            (click)="saveDate(todo, date)"
          >
            Save changes
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
